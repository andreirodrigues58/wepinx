<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="login.css">
    <title>WEPINX - Campo Minado</title>
</head>
<body>

    <div class="conteiner">

        <div class="secao-login">
            <div class="UsuarisenhaLogin">
                <h1 class="wepinx">WEPINX <br> GAMES</h1>
                <h2 class="text-h2">Faça seu Login aqui:</h2>
    
                <div id="loginError"></div>
                <div id="loginSucess"></div>
    
                <label id="labelUSER" for="Usercard">Usuário</label>
                <input type="text" id="UserLogin" placeholder="Usuário" required>
                
                <div class="senhacaixa">
                <label id="labelSENHA" for="Senhacard">Senha</label>
                <input type="password" id="SenhaLogin" placeholder="Senha">
                <i class="bi bi-eye-fill"  id="btn-senha" onclick="mostrarSenha()"></i>
                </div>
                <button class="entrar" onclick="fazerLogin()">Entrar</button>
                <p class="text-cadast">Não tem um Login? <br>ㅤㅤ<span>Cadastre-se</span></p>
            </div>
        </div>


        <div class="secao-cadastro">
            <div class="UsuarsenhaLogin">
                <h2 class="text-h2">Faça seu cadastro aqui:</h2>
             
                <div id="msgError"></div>
                <div id="msgSucess"></div>


                <div class="nomecaixa2">
                <label id="labelUSER" for="Usercard"></label>
                <input type="text" id="UserCadas" placeholder="Usuário" required>
                </div>
    
              <div class="senhacaixa3">
                <label id="labelSENHA" for="Senhacard"></label>
                <input type="password" id="SenhaCadas" placeholder="Senha">
                <i class="bi bi-eye-fill"  id="btnc-senha" onclick="mostrarSenhaC()"></i>
              </div>
    
               <div class="senhacaixa2">
                <label id="labelConfirmSENHA" for="ConfirmSenhacard"></label>
                <input type="password" id="ConfirmSenhaCadas" placeholder="Confirmar Senha">
                <i class="bi bi-eye-fill"  id="btns-senha" onclick="mostrarSenhaS()"></i>
            
                </div>
    
                <button class="Cadastrar" onclick="cadastrar()">Cadastrar</button>
                <p class="realizar-cadast">Já tem um cadastro?<br>ㅤㅤ<span> Faça seu login</span></p>
            </div>
        </div>

    </div>
    
    <script src="cadastro.js">function cadastrar() {
        if (validUsuario && validSenha && validConfirmSenha) {
            let listaUser = JSON.parse(localStorage.getItem('listaUser') || '[]')
    
        listaUser.push( {
    
            userCad: usuario.value,
            senhaCad: senha.value
        })
    
        localStorage.setItem('listaUser', JSON.stringify(listaUser))
    
            msgSucess.setAttribute('style', 'display:block; color: white');
            msgSucess.innerHTML = '<strong>Cadastrando usuário...</strong>';
            msgError.setAttribute('style', 'display:none');
    
    
            setTimeout(()=> {
             window.location.href = "index.html"
            }, 3000)
    
        } else {
            msgError.setAttribute('style', 'display:block; color: red');
            msgError.innerHTML = '<strong>Preencha todos os campos corretamente!</strong>';
            msgSucess.setAttribute('style', 'display:none');
        }
    }</script>
    <script src="login.js">

function fazerLogin(){
    const user = document.getElementById('UserLogin').value
    const senha = document.getElementById('SenhaLogin').value;

    const listaUser = JSON.parse(localStorage.getItem('listaUser') || '[]');
    const usuarioValido = listaUser.find((item) => {
       return item.userCad === user && item.senhaCad === senha;
   });


   if (usuarioValido) {
       loginSucess.setAttribute('style', 'display:block; color: green');
       loginSucess.innerHTML = 'Login validado. Redirecionando usuário...';
       loginError.setAttribute('style', 'display:none');

       setTimeout(()=> {
           window.location.href = 'indexminado.html'
          }, 3000)
   } else {
       loginError.setAttribute('style', 'display:block; color: red');
       loginError.innerHTML = 'Usuário ou senha inválidos';
       loginSucess.setAttribute('style', 'display:none');;
   }
}
    </script>
</body>
</html>